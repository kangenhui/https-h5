(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5546c656"],{"097d":function(t,i,e){"use strict";var a=e("5ca1"),s=e("8378"),o=e("7726"),n=e("ebd6"),r=e("bcaa");a(a.P+a.R,"Promise",{finally:function(t){var i=n(this,s.Promise||o.Promise),e="function"==typeof t;return this.then(e?function(e){return r(i,t()).then((function(){return e}))}:t,e?function(e){return r(i,t()).then((function(){throw e}))}:t)}})},"1dae":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"container"},[e("div",{staticClass:"title"},[t._v("实名认证")]),e("div",{staticClass:"header"},[e("el-steps",{staticClass:"steps",attrs:{active:t.active,"finish-status":"success"}},[e("el-step",{attrs:{title:"上传身份证"}}),e("el-step",{attrs:{title:"实人检测"}}),e("el-step",{attrs:{title:"等待结果"}})],1)],1),t.isPhoto?t._e():e("div",[e("div",{staticClass:"middle"},[e("el-card",{staticClass:"box-card",attrs:{shadow:"always"}},[t.imgPositive?e("div",{staticClass:"card-text"},[e("img",{attrs:{src:t.imgPositive},on:{click:function(i){return t.toPhotograph(1)}}})]):e("div",{staticClass:"card-text"},[t._v(" 上传身份证（人面面） "),e("el-button",{attrs:{icon:"el-icon-plus",circle:""},on:{click:function(i){return t.toPhotograph(1)}}})],1)]),e("el-card",{staticClass:"box-card",attrs:{shadow:"always"}},[t.imgNegative?e("div",{staticClass:"card-text"},[e("img",{attrs:{src:t.imgNegative},on:{click:function(i){return t.toPhotograph(2)}}})]):e("div",{staticClass:"card-text"},[t._v(" 上传身份证（国徽面） "),e("el-button",{attrs:{icon:"el-icon-plus",circle:""},on:{click:function(i){return t.toPhotograph(2)}}})],1)])],1),e("div",{staticClass:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.toVideo}},[t._v("下一步")])],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isPhoto,expression:"isPhoto"}],staticClass:"photo"},[e("video",{ref:"video",attrs:{playsinline:"false","webkit-playsinline":"false"}}),e("el-button",{attrs:{type:"danger"},on:{click:t.setImage}},[t._v("确 认 拍 照")])],1),e("input",{attrs:{type:"file",accept:"image/*",capture:"camera"}})])},s=[],o=(e("7f7f"),e("4917"),e("097d"),e("06db"),e("551c"),{name:"photograph",data:function(){return{bodyStyle:{height:"100px"},active:0,imgPositive:void 0,imgNegative:void 0,isPhoto:!1,isVideo:!1,front:0,canvas:null,context:null,cameras:[],isPlay:!1}},computed:{},watch:{},filters:{},mounted:function(){this.loadCameras()},created:function(){},methods:{toPhotograph:function(t){var i=this;this.isPlay||(this.isPlay=!0,setTimeout((function(){i.$refs.video.play()}),500)),this.isPhoto=!0,this.front=t},toText:function(){this.$router.push("/demo2")},toios:function(){this.$router.push("/cameraCanvas")},toVideo:function(){void 0!=this.imgNegative&&void 0!=this.imgNegative?((this.base64ToSize(this.imgNegative)>1048576||this.base64ToSize(this.imgPositive)>1048576)&&this.$message.error("图片大小超过1MB,请重新拍照上传"),this.activa=1,this.isPlay=!1,this.stopPhoto(),this.$router.push("/cameraCanvas")):this.$message.error("请完成当前操作")},base64ToSize:function(t){var i=t.indexOf("=");t=-1!=i?t.substring(0,i):t;var e=t.length;return e-e/8*2},loadCameras:function(){var t=this;navigator.mediaDevices.enumerateDevices().then((function(i){i.forEach((function(i){"videoinput"===i.kind&&t.cameras.push(i.deviceId)})),t.getCamera()})).catch((function(t){console.log(t.name+": "+t.message)}))},getCamera:function(){var t,i=this,e=1===this.cameras.length?this.cameras[0]:this.cameras[1];t=Boolean(navigator.userAgent.match(/iphone|ipod|iOS|ipad/gi))?{audio:!1,video:{facingMode:"environment "}}:{audio:!1,video:{deviceId:{exact:e}}},this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia(t).then((function(t){i.$refs.video.srcObject=t})).catch((function(t){console.log(t)})).finally((function(){console.log("相机加载完毕")}))},setImage:function(){var t=this.$refs.video;this.context.drawImage(t,0,0,300,150);var i=this.canvas.toDataURL("image/jpeg");1===this.front?this.imgPositive=i:this.imgNegative=i,this.isPhoto=!1},stopPhoto:function(){this.$refs.video.srcObject.getTracks()[0].stop()}}}),n=o,r=(e("daf1"),e("2877")),c=Object(r["a"])(n,a,s,!1,null,null,null);i["default"]=c.exports},4917:function(t,i,e){"use strict";var a=e("cb7c"),s=e("9def"),o=e("0390"),n=e("5f1b");e("214f")("match",1,(function(t,i,e,r){return[function(e){var a=t(this),s=void 0==e?void 0:e[i];return void 0!==s?s.call(e,a):new RegExp(e)[i](String(a))},function(t){var i=r(e,t,this);if(i.done)return i.value;var c=a(t),l=String(this);if(!c.global)return n(c,l);var u=c.unicode;c.lastIndex=0;var h,v=[],d=0;while(null!==(h=n(c,l))){var f=String(h[0]);v[d]=f,""===f&&(c.lastIndex=o(l,s(c.lastIndex),u)),d++}return 0===d?null:v}]}))},a9f4:function(t,i,e){},daf1:function(t,i,e){"use strict";e("a9f4")}}]);