(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"0f7f":function(t,i,e){"use strict";e.r(i);var n=e("5d10"),a=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=a.a},"3d6c":function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return n}));var n={uniSteps:e("bd27").default,uniCard:e("ab98").default},a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.isCode?e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"top"},[e("uni-steps",{attrs:{options:t.stepsOption,active:t.stepsActive}})],1),e("v-uni-view",{staticClass:"main"},[e("uni-card",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.saveImage(1)}}},[t.imgPositive?e("v-uni-image",{attrs:{mode:"scaleToFill",src:t.imgPositive}}):e("v-uni-text",[t._v("上传身份证(人像面)")])],1),e("uni-card",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.saveImage(2)}}},[t.imgNegative?e("v-uni-image",{attrs:{mode:"scaleToFill",src:t.imgNegative}}):e("v-uni-text",[t._v("上传身份证(国徽面)")])],1)],1),e("v-uni-view",{staticClass:"footer"},[e("v-uni-button",{attrs:{type:"primary",plain:!0},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toVideo.apply(void 0,arguments)}}},[t._v("下 一 步")])],1)],1):t._e()},o=[]},"5d10":function(t,i,e){"use strict";e("d3b7"),e("e25e"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n={data:function(){return{stepsOption:[{title:"上传身份证"},{title:"实人检测"},{title:"等待审核"}],stepsActive:0,imgPositive:void 0,imgNegative:void 0,isCode:!1,iccid:void 0,custid:void 0,reqNo:void 0}},onLoad:function(t){var i=this;try{t&&this.$request(this.$api.applyAuthCode,{custId:t.custid,iccid:t.iccid},!0,"post").then((function(e){i.iccid=t.iccid,i.custid=t.custid,i.reqNo=e.data,console.log(e),i.isCode=!0})).catch((function(t){console.log(t),uni.showToast({title:"获取参数失败",icon:"error",duration:2e3})}))}catch(e){console.log(e)}},mounted:function(){},methods:{saveImage:function(t){var i=this;uni.chooseImage({count:1,sizeType:["ompressed"],sourceType:["camera"],success:function(e){console.log(e),i.dealImage(e.tempFilePaths[0],t).then((function(n){var a=n.length,o=parseInt(a-a/8*2),c=(o/1024).toFixed(2);c>=1024?uni.showToast({title:"图片大于1MB,请重新拍照",icon:"error",duration:2e3}):(alert(e.tempFilePaths[0]),1===t?i.imgPositive=e.tempFilePaths[0]:i.imgNegative=e.tempFilePaths[0])}))},fail:function(t){}})},dealImage:function(t,i){return new Promise((function(i,e){var n=new Image;n.src=t,n.onload=function(){var t=this,e=t.width,n=t.height,a=document.createElement("canvas"),o=a.getContext("2d");a.width=e,a.height=n,o.drawImage(t,0,0,e,n);var c=a.toDataURL("image/jpeg",.8);i(c)}}))},uploadPhoto:function(t,i){var e=this;uni.uploadFile({url:this.$api.uploadPhoto,filePath:t,name:"file",formData:{imgType:i,vin:this.iccid,custId:this.custid},header:{},success:function(n){1===i?e.imgPositive=t:e.imgNegative=t},fail:function(t){uni.showToast({title:"上传失败",icon:"error",duration:2e3})}})},toVideo:function(){uni.navigateTo({url:"./videoRecording?custid="+this.custid+"&iccid="+this.iccid})}}};i.default=n},"5f54":function(t,i,e){var n=e("aa2d");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("02481808",n,!0,{sourceMap:!1,shadowMode:!1})},aa2d:function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,".container[data-v-d8be00ae]{display:flex;flex-direction:column;padding-top:%?50?%}.container .top[data-v-d8be00ae]{text-align:center;height:%?100?%}.container .main[data-v-d8be00ae]{color:#fff}.container .main .uni-card--shadow[data-v-d8be00ae]{height:%?260?%;background-color:#1678ff}.container .main uni-text[data-v-d8be00ae]{text-align:center;font-size:13px;color:#fff;height:%?220?%;line-height:%?220?%}.container .main uni-image[data-v-d8be00ae]{height:%?220?%}.container .footer[data-v-d8be00ae]{padding:0 %?30?%}",""]),t.exports=i},bb00:function(t,i,e){"use strict";e.r(i);var n=e("3d6c"),a=e("0f7f");for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);e("e0e5");var c,s=e("f0c5"),d=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"d8be00ae",null,!1,n["a"],c);i["default"]=d.exports},e0e5:function(t,i,e){"use strict";var n=e("5f54"),a=e.n(n);a.a}}]);